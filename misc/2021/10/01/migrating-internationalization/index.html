<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="description" content="Benoît Verhaeghe's blog">
    

    <link rel="icon" href="/img/logo/logo.png" type="image/x-icon">


    <title>Migrating internationalization files - Benoît Verhaeghe</title>

    <link rel="canonical" href="http://badetitou.github.io/misc/2021/10/01/migrating-internationalization/">

    <!-- <link rel="stylesheet" href="/assets/vendor/fontawesome-free/css/all.min.css"> -->
    
    <script src="https://kit.fontawesome.com/5574707d0b.js" crossorigin="anonymous"></script>
    
    <!-- My CSS -->
    <link rel="stylesheet" href="/assets/main.css">
    <!-- My JS -->
    <script src="/js/my-head.js"></script>

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <link type="application/atom+xml" rel="alternate" href="http://badetitou.github.io/feed.xml" title="Benoît Verhaeghe" />

</head>


<body>

    <nav>
    <div class="nav-wrapper">
        <a href="#" onclick="openNav()" class="sidenav-trigger"><i class="material-icons">menu</i></a>
        
        <ul class="left hide-on-med-and-down"> <li>
        <a href="/" style="margin-left: 20px;"> Benoît Verhaeghe</a>
</li>
</ul>

        <ul class="right hide-on-med-and-down">
            <li>
                <span style="width: 30px; display: inline-block;">
                    <i id="theme-switch" style="font-size: 20px" class="fa-solid fa-1x"></i>
                </span>
            </li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
            <li><a href="/teaching/">Teaching</a></li>
        
        
        
        
        
        
        
        
        
            <li><a href="/post/">Posts</a></li>
        
        
        
        
        
        
        
        
        
            <li><a href="/projects/">Projects</a></li>
        
        
        
            <li><a href="/research/">Research</a></li>
        
        
        
        
        
        </ul>
        
    </div>
</nav>

<ul class="sidenav" id="sidenav">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
    <li><a href="/">Home</a></li>
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
        
            <li><a href="/teaching/">Teaching</a></li>
        
    
        
        
    
        
        
    
        
            <li><a href="/post/">Posts</a></li>
        
    
        
        
    
        
        
    
        
            <li><a href="/projects/">Projects</a></li>
        
    
        
            <li><a href="/research/">Research</a></li>
        
    
        
        
    
</ul>

<div id="sidenav-overlay" onclick="closeNav()"></div>

    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/home-bg.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12">
                <div class="post-heading text-center">
                    <h1>Migrating internationalization files</h1>
                    
                    <h2 class="subheading">A nice MDE example</h2>
                    
                    <span class="meta">Posted by
                        Benoît "badetitou" Verhaeghe on
                        October 1, 2021</span>
                    <span class="post-meta">
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article class="container">
    <div class="row">
        <div class="col s12 m12">
            <div class="card">
                <div class="card-content article-content">
                    <p>During my Ph.D. <a href="http://badetitou.github.io/projects/Casino">migration project</a>, I considered the migration of several GUI aspects:</p>

<ul>
  <li>visual</li>
  <li>behavioral</li>
  <li>business</li>
</ul>

<p>These elements are the main ones.
When <em>perfectly</em> considered, you can migrate the front-end of any application.
But, we are missing some other stuff <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20">
For example, how do you migrate i18N files?</p>

<p>In this post, I’ll present how to build a simple migration tool to migrate I18N files from <code class="language-plaintext highlighter-rouge">.properties</code> (used by Java) to <code class="language-plaintext highlighter-rouge">.json</code> format (used by Angular).</p>

<h2 id="i18n-files">I18N files</h2>

<p>First, let’s see our source and target.</p>

<p>As a source, I have several <code class="language-plaintext highlighter-rouge">.properties</code> files, including I18N for a Java project.
Each file has a set of <em>key/value</em> and comments.
For example, the <code class="language-plaintext highlighter-rouge">EditerMessages_fr.properties</code> is as follow:</p>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">##########
#    Page : Edit
##########
</span>
<span class="py">pageTitle</span><span class="p">=</span><span class="s">Editer</span>
<span class="py">classerDemande</span><span class="p">=</span><span class="s">Demande</span>
<span class="py">classerDiffusion</span><span class="p">=</span><span class="s">Diffusion</span>
<span class="py">classerPar</span><span class="p">=</span><span class="s">Classer Par</span>
</code></pre></div></div>

<p>And it’s Arabic version <code class="language-plaintext highlighter-rouge">EditerMessages_ar.properties</code></p>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#########
#    Page : Editer
#########
</span>
<span class="py">pageTitle</span><span class="p">=</span><span class="s">تحرير</span>
<span class="py">classerDemande</span><span class="p">=</span><span class="s">طلب</span>
<span class="py">classerDiffusion</span><span class="p">=</span><span class="s">بث</span>
<span class="py">classerPar</span><span class="p">=</span><span class="s">تصنيف حسب</span>
</code></pre></div></div>

<p>As a target, I need <strong>only one JSON file</strong> per language.
Thus, the file for the french translation looks like this:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"EditerMessages"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"classerDemande"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Demande"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"classerDiffusion"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Diffusion"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"classerPar"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Classer Par"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"pageTitle"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Editer"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>And the Arabic version:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"EditerMessages"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"classerDemande"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"طلب"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"classerDiffusion"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"بث"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"classerPar"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"تصنيف حسب"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"pageTitle"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"تحرير"</span><span class="w">
    </span><span class="p">},</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>To perform the transformation from the <code class="language-plaintext highlighter-rouge">.properties</code> file to <code class="language-plaintext highlighter-rouge">json</code>, we will use MDE.
The approach is divided into three main steps:</p>

<ol>
  <li>Designing a meta-model representing internationalization</li>
  <li>Creating an importer of properties files</li>
  <li>Creating a JSON exporter</li>
</ol>

<h2 id="internationalization-meta-model">Internationalization Meta-model</h2>

<p>I18N files are simple.
They consist of a set of <em>key/values</em>.
Each value is associated with a language.
And each file can be associated with a namespace.</p>

<p>For example, in the introduction example, the namespace of all entries is <em>“EditerMessages”</em>.</p>

<p>I designed a meta-model to represent all those concepts:</p>

<p><img src="/misc/img-2021-10-01-internationalization/I18N-metamodel.png" alt="meta-model"></p>

<p>Once the meta-model is designed, we must create an importer that takes <code class="language-plaintext highlighter-rouge">.properties</code> files as input and produces a model.</p>

<h2 id="properties-importer">Properties Importer</h2>

<p>To produce a model, I first look for a <code class="language-plaintext highlighter-rouge">.properties</code> parser without much success.
Thus, I decided to create my own parser.
Given a correctly formatted file, the parser provides me the I18N entries.
Then, by iterating on this collection, I build an I18N model.</p>

<h3 id="i18n-parser">I18N parser</h3>

<p>To implement the parser, I used the <a href="https://github.com/kursjan/petitparser2">PetitParser2 project</a>.
This project aims to ease the creation of new parsers.</p>

<p>First, I downloaded the last version of <a href="https://modularmoose.org/moose-wiki/Beginners/InstallMoose">Moose</a>, and I installed PetitParser using the command provided in the repository Readme:</p>

<div class="language-st highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Metacello</span> <span class="nb">new</span>
    <span class="nf">baseline:</span> <span class="s">'PetitParser2'</span><span class="p">;</span>
    <span class="nf">repository:</span> <span class="s">'github://kursjan/petitparser2'</span><span class="p">;</span>
    <span class="nf">load</span><span class="p">.</span>
</code></pre></div></div>

<p>In my Moose Image, I created a new parser.
To do so, I extended the <code class="language-plaintext highlighter-rouge">PP2CompositeNode</code> class.</p>

<div class="language-st highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">PP2CompositeNode</span> <span class="nf">&lt;&lt;</span> <span class="ss">#CS18NPropertiesParser</span>
    <span class="nf">slots:</span> <span class="p">{</span> <span class="p">};</span>
    <span class="nf">package:</span> <span class="s">'Casino-18N-Model-PropertyImporter'</span>
</code></pre></div></div>

<p>Then, I defined the parsing rules.
Using PetitParser2, each rule corresponds to a method.</p>

<p>First, <code class="language-plaintext highlighter-rouge">start</code> is the entry point.</p>

<div class="language-st highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">start</span>
    <span class="o">^</span> <span class="nv">pairs</span> <span class="nf">end</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">pairs</code> parses the entries of the <code class="language-plaintext highlighter-rouge">.properties</code> files.</p>

<div class="language-st highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">pairs</span>

    <span class="o">^</span> <span class="nv">comment</span> <span class="nf">optional</span> <span class="nf">starLazy,</span> <span class="nv">pair</span> <span class="nf">,</span> <span class="p">((</span><span class="nv">newline</span> <span class="nf">/</span> <span class="nv">comment</span><span class="p">)</span> <span class="nf">star</span> <span class="nf">,</span> <span class="nv">pair</span> <span class="nf">==&gt;</span> <span class="p">[</span> <span class="o">:</span><span class="nv">token</span> <span class="p">|</span> <span class="nv">token</span> <span class="nf">second</span> <span class="p">])</span> <span class="nf">star</span> <span class="nf">,</span> <span class="p">(</span><span class="nv">newline</span><span class="nf">/</span><span class="nv">comment</span><span class="p">)</span> <span class="nf">star</span> <span class="nf">==&gt;</span> <span class="p">[</span> <span class="o">:</span><span class="nv">token</span> <span class="p">|</span> 
      <span class="p">((</span><span class="nc">OrderedCollection</span> <span class="nf">with:</span> <span class="nv">token</span> <span class="nf">second</span><span class="p">)</span>
           <span class="nf">addAll:</span> <span class="nv">token</span> <span class="nf">third</span><span class="p">;</span>
           <span class="nf">yourself</span><span class="p">)</span> <span class="nf">asArray</span> <span class="p">]</span>
</code></pre></div></div>

<p>The first part of this method (before <code class="language-plaintext highlighter-rouge">==&gt;</code>) corresponds to the rule parsed.
The second part (after <code class="language-plaintext highlighter-rouge">==&gt;</code>), to the production.</p>

<p>The first part tries to parse one or several <code class="language-plaintext highlighter-rouge">comment</code>.
Then, it parses one <code class="language-plaintext highlighter-rouge">pair</code> followed by a list of <code class="language-plaintext highlighter-rouge">comment</code>, <code class="language-plaintext highlighter-rouge">newline</code>, and <code class="language-plaintext highlighter-rouge">pair</code>.</p>

<p><img src="https://mermaid.ink/svg/eyJjb2RlIjoiZmxvd2NoYXJ0IExSXG4gICAgQ29tbWVudCAtLT4gUFtcIlBhaXJcIl1cbiAgICBQIC0tPiBDW1wiQ29tbWVudC9OZXcgTGluZVwiXVxuICAgIHN1YmdyYXBoIHN0YXJcbiAgICBDIC0tPiBQYWlyXG4gICAgZW5kXG4gICAgUGFpciAtLT4gRU5EXG4gICIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2UsImF1dG9TeW5jIjp0cnVlLCJ1cGRhdGVEaWFncmFtIjpmYWxzZX0" alt=""></p>

<blockquote>
  <p>This parser is clearly not perfect and would require some improvement.
Nevertheless, it does work for our context.</p>
</blockquote>

<p>The second part produces a collection (<em>i.e.</em> a list) of the <code class="language-plaintext highlighter-rouge">pair</code>.</p>

<h3 id="building-the-i18n-model">Building the I18N model</h3>

<p>Now that we can parse one file, we can build a I18N model.
To do so, we will first parse every <code class="language-plaintext highlighter-rouge">.properties</code> file.
For each file, we extract the <code class="language-plaintext highlighter-rouge">language</code> and the <code class="language-plaintext highlighter-rouge">namespace</code> based on the file name.
Thus, <code class="language-plaintext highlighter-rouge">EditerMessages_fr.properties</code> is the file for the <code class="language-plaintext highlighter-rouge">fr</code> language and the <code class="language-plaintext highlighter-rouge">EditerMessages</code> namespace.
Then, for each file entry, we instantiate an entry in our model inside the namespace and with the correct language attached.</p>

<div class="language-st highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">importString:</span> <span class="nv">aString</span>
    <span class="p">(</span><span class="nv">parser</span> <span class="nf">parse:</span> <span class="nv">aString</span><span class="p">)</span> <span class="nf">do:</span> <span class="p">[</span> <span class="o">:</span><span class="nv">keyValue</span> <span class="p">|</span> 
        <span class="p">(</span><span class="bp">self</span> <span class="nf">model</span> <span class="nf">allWithType:</span> <span class="nc">CS18NEntry</span><span class="p">)</span> <span class="nf">asOrderedCollection</span>
            <span class="nf">detect:</span> <span class="p">[</span> <span class="o">:</span><span class="nv">entry</span> <span class="p">|</span> 
                <span class="c">"search for existing key in the file"</span>
                <span class="nv">entry</span> <span class="nf">key</span> <span class="nf">name</span> <span class="nf">=</span> <span class="nv">keyValue</span> <span class="nf">key</span> <span class="p">]</span>
            <span class="nf">ifOne:</span> <span class="p">[</span> <span class="o">:</span><span class="nv">entry</span> <span class="p">|</span>
                <span class="c">"If an entry already exists (in another language for instance)"</span>
                <span class="nv">entry</span> <span class="nf">addValue:</span> <span class="p">((</span><span class="bp">self</span> <span class="nf">createInModel:</span> <span class="nc">CS18NValue</span><span class="p">)</span>
                    <span class="nf">name:</span> <span class="nv">keyValue</span> <span class="nf">value</span><span class="p">;</span>
                    <span class="nf">language:</span> <span class="nv">currentLanguage</span><span class="p">;</span>
                    <span class="nf">yourself</span><span class="p">)</span> <span class="p">]</span>
            <span class="nf">ifNone:</span> <span class="p">[</span>
                <span class="c">"If no entry exist"</span>
                <span class="p">(</span><span class="bp">self</span> <span class="nf">createInModel:</span> <span class="nc">CS18NEntry</span><span class="p">)</span>
                    <span class="nf">namespace:</span> <span class="nv">currentNamespace</span><span class="p">;</span>
                    <span class="nf">key:</span> <span class="p">((</span><span class="bp">self</span> <span class="nf">createInModel:</span> <span class="nc">CS18NKey</span><span class="p">)</span>
                        <span class="nf">name:</span> <span class="nv">keyValue</span> <span class="nf">key</span><span class="p">;</span>
                        <span class="nf">yourself</span><span class="p">);</span>
                    <span class="nf">addValue:</span> <span class="p">((</span><span class="bp">self</span> <span class="nf">createInModel:</span> <span class="nc">CS18NValue</span><span class="p">)</span>
                        <span class="nf">name:</span> <span class="nv">keyValue</span> <span class="nf">value</span><span class="p">;</span>
                        <span class="nf">language:</span> <span class="nv">currentLanguage</span><span class="p">;</span>
                        <span class="nf">yourself</span><span class="p">);</span>
                    <span class="nf">yourself</span> <span class="p">]</span> <span class="p">]</span>
</code></pre></div></div>

<p>After performing the import, we get a model with, for each namespace, several entries.
Each entry has a key and several values.
Each value is attached to the language.</p>

<h2 id="json-exporter">JSON exporter</h2>

<p>To perform the JSON export, I used the <a href="https://github.com/svenvc/NeoJSON">NeoJSON project</a>.
NeoJSON allows one to create a custom encoder.</p>

<p>For the export, we first select a language.
Then, we build a dictionary with all the namespaces:</p>

<div class="language-st highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">rootDic</span> <span class="o">:=</span> <span class="nc">Dictionary</span> <span class="nb">new</span><span class="p">.</span>
    <span class="p">(</span><span class="nv">model</span> <span class="nf">allWithType:</span> <span class="nc">CS18NNamespace</span><span class="p">)</span>
        <span class="nf">select:</span> <span class="p">[</span> <span class="o">:</span><span class="nv">namespace</span> <span class="p">|</span> <span class="nv">namespace</span> <span class="nf">namespace</span> <span class="nf">isNil</span> <span class="p">]</span>
        <span class="nf">thenDo:</span> <span class="p">[</span> <span class="o">:</span><span class="nv">namespace</span> <span class="p">|</span> <span class="nv">rootDic</span> <span class="nf">at:</span> <span class="nv">namespace</span> <span class="nf">name</span> <span class="nf">put:</span> <span class="nv">namespace</span> <span class="p">].</span>
</code></pre></div></div>

<p>To export a namespace (<em>i.e.</em>, a <code class="language-plaintext highlighter-rouge">CS18NNamespace</code>), I define a custom encoder:</p>

<div class="language-st highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">writter</span> <span class="nf">for:</span> <span class="nc">CS18NNamespace</span> <span class="nf">customDo:</span> <span class="p">[</span> <span class="o">:</span><span class="nv">mapper</span> <span class="p">|</span> 
    <span class="nv">mapper</span> <span class="nf">encoder:</span> <span class="p">[</span> <span class="o">:</span><span class="nv">namespace</span> <span class="p">|</span> <span class="p">(</span><span class="bp">self</span> <span class="nf">constructNamespace:</span> <span class="nv">namespace</span><span class="p">)</span> <span class="nf">asDictionary</span> 
        <span class="p">]</span> 
    <span class="p">].</span>
</code></pre></div></div>

<div class="language-st highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">constructNamespace:</span> <span class="nv">aNamespace</span>
    <span class="p">|</span><span class="nv"> dic </span><span class="p">|</span>
    <span class="nv">dic</span> <span class="o">:=</span> <span class="nc">Dictionary</span> <span class="nb">new</span><span class="p">.</span>
    <span class="nv">aNamespace</span> <span class="nf">containables</span> <span class="nf">do:</span> <span class="p">[</span> <span class="o">:</span><span class="nv">containable</span> <span class="p">|</span> 
        <span class="p">(</span><span class="nv">containable</span> <span class="nf">isKindOf:</span> <span class="nc">CS18NNamespace</span><span class="p">)</span>
            <span class="nb">ifTrue:</span> <span class="p">[</span> <span class="nv">dic</span> <span class="nf">at:</span> <span class="nv">containable</span> <span class="nf">name</span> <span class="nf">put:</span> <span class="p">(</span><span class="bp">self</span> <span class="nf">constructNamespace:</span> <span class="nv">containable</span><span class="p">)</span> <span class="p">]</span>
            <span class="nb">ifFalse:</span> <span class="p">[</span> <span class="c">"should be an CS18NEntry"</span> 
                <span class="nv">dic</span> <span class="nf">at:</span> <span class="nv">containable</span> <span class="nf">key</span> <span class="nf">name</span> <span class="nf">put:</span> <span class="p">(</span><span class="nv">containable</span> <span class="nf">values</span> <span class="nf">detect:</span> <span class="p">[</span> <span class="o">:</span><span class="nv">value</span> <span class="p">|</span> <span class="nv">value</span> <span class="nf">language</span> <span class="nf">=</span> <span class="nv">language</span> <span class="p">]</span> <span class="nf">ifOne:</span> <span class="p">[</span> <span class="o">:</span><span class="nv">value</span> <span class="p">|</span> <span class="nv">value</span> <span class="nf">name</span> <span class="p">]</span> <span class="nf">ifNone:</span> <span class="p">[</span> <span class="s">''</span> <span class="p">])</span> <span class="p">]</span> <span class="p">].</span>
    <span class="o">^</span> <span class="nv">dic</span>
</code></pre></div></div>

<p>The custom encoder consists on converting a <code class="language-plaintext highlighter-rouge">Namespace</code> into a dictionary of entries with the entries keys and their values in the selected language.</p>

<h2 id="perform-the-migration">Perform the migration</h2>

<p>Once my importer and exporter are designed, I can perform the migration.
To do so, I use a little script.
It creates a model of I18N, imports several <code class="language-plaintext highlighter-rouge">.properties</code> file entries in the model, and exports the Arabic entries in a JSON file.</p>

<div class="language-st highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">"Create a model"</span>
<span class="nv">i18nModel</span> <span class="o">:=</span> <span class="nc">CS18NModel</span> <span class="nb">new</span><span class="p">.</span>

<span class="c">"Create an importer"</span>
<span class="nv">importer</span> <span class="o">:=</span> <span class="nc">CS18NPropertiesImporter</span> <span class="nb">new</span><span class="p">.</span>
<span class="nv">importer</span> <span class="nf">model:</span> <span class="nv">i18nModel</span><span class="p">.</span>

<span class="c">"Import all entries from the &lt;myProject&gt; folder"</span> 
<span class="p">(</span><span class="s">'D:\dev\myProject\'</span> <span class="nf">asFileReference</span> <span class="nf">allChildrenMatching:</span> <span class="s">'*.properties'</span><span class="p">)</span> <span class="nf">do:</span> <span class="p">[</span> <span class="o">:</span><span class="nv">fileRef</span> <span class="p">|</span> 
    <span class="bp">self</span> <span class="nf">record:</span> <span class="nv">fileRef</span> <span class="nf">absolutePath</span> <span class="nf">basename</span><span class="p">.</span>
    <span class="nv">importer</span> <span class="nf">importFile:</span> <span class="nv">fileRef</span><span class="p">.</span>
<span class="p">].</span>

<span class="c">"export the arabian JSON I18N file"</span>
<span class="s">'D:/myFile-ar.json'</span> <span class="nf">asFileReference</span> <span class="nf">writeStreamDo:</span> <span class="p">[</span> <span class="o">:</span><span class="nv">stream</span> <span class="p">|</span>
    <span class="nc">CS18NPropertiesExporter</span> <span class="nb">new</span>
        <span class="nf">model:</span> <span class="nv">importer</span> <span class="nf">model</span><span class="p">;</span>
        <span class="nf">stream:</span> <span class="nv">stream</span><span class="p">;</span>
        <span class="nf">language:</span> <span class="p">((</span><span class="nv">importer</span> <span class="nf">model</span> <span class="nf">allWithType:</span> <span class="nc">CS18NLanguage</span><span class="p">)</span> <span class="nf">detect:</span> <span class="p">[</span> <span class="o">:</span><span class="nv">lang</span> <span class="p">|</span> <span class="nv">lang</span> <span class="nf">shortName</span> <span class="nf">=</span> <span class="s">'ar'</span> <span class="p">]);</span>
        <span class="nf">export</span>
<span class="p">]</span>
</code></pre></div></div>

<h2 id="ressource">Ressource</h2>

<p>The meta-model, importer, and exporter are freely available in <a href="https://github.com/badetitou/Casino-I18N">GitHub</a>.</p>

<div class="masonry masonry-2">

    <div class="text-center">
        <a class="m-button" href="https://www.research-bl.com/2021/10/05/migrating-internationalization-files/" target="_blank">
            Also published at *research-bl.com*
            <i class="fas fa-external-link-alt"></i>
        </a>
    </div>

    <div class="text-center">
        <a class="m-button" href="https://modularmoose.org/2021/10/01/migrating-internationalization.html" target="_blank">
            Also published at *modularmoose.org*
            <i class="fas fa-external-link-alt"></i>
        </a>
    </div>
</div>

                </div>
            </div>
        </div>
    </div>

    <script src="https://utteranc.es/client.js" repo="badetitou/badetitou.github.io" issue-term="pathname" label="comments" theme="boxy-light" crossorigin="anonymous" async>
</script>

    <ul class="pager list-inline">
        
        <li class="previous">
            <a class="m-button" href="/misc/2021/07/19/automatic-metamodel-documentation-generation/" data-toggle="tooltip" data-placement="top" data-tooltip="Automatic meta-model documentation generation">←
                Previous Post</a>
        </li>
        
        
        <li class="next">
            <a class="m-button" href="/projects/vscode-pharo/2021/12/02/with-gtk/" data-toggle="tooltip" data-placement="top" data-tooltip="VSCode-Pharo with GTK support">Next Post →</a>
        </li>
        
    </ul>
</article>


    <!-- Footer -->
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col m12">
                <ul class="list-inline text-center">
                    
                    <li>
                        <a href="https://twitter.com/badetitou">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a rel="me" href="https://piaille.fr/@badetitou">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fab fa-mastodon fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="https://orcid.org/0000-0002-4588-2698">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fab fa-orcid fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://github.com/badetitou">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.linkedin.com/in/benoitverhaeghe">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fab fa-linkedin-in fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="mailto:benoit@badetitou.fr">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="text-center">Copyright © badetitou 2023
                </p>
            </div>
        </div>
    </div>
</footer>

    <!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<script src="/js/my.js"></script>
<script src="/js/my-sidenav.js"></script>

<script src="/js/lightense.min.js"></script>

<script>

  // Init Lightense
  window.addEventListener("load", function() {
    Lightense("img:not(.no-lightense),.lightense", {
      background: 'rgba(0,0,0,0.05)'
    });
  }, false);

  // Example: Lazy Lightense
  document.addEventListener("DOMContentLoaded", function(e) {
    function createDom(type, cssClass) {
      var div = document.createElement(type);
      div.className = cssClass;
      return div;
    }

    var thumb = document.querySelector(".lightense-lazy");
    var original = new Image();

    // Init wrapper
    var wrap = createDom("div", "lightense-lazy-wrap");
    thumb.parentNode.insertBefore(wrap, thumb);
    wrap.appendChild(thumb);

    // Wrap thumbnail
    var thumbWrap = createDom("div", "lightense-lazy-thumb");
    thumbWrap.appendChild(thumb);
    wrap.appendChild(thumbWrap);

    // Wrap original
    var originalWrap = createDom("div", "lightense-lazy-large");
    original.src = thumb.dataset.original;
    originalWrap.appendChild(original);
    wrap.appendChild(originalWrap);

    // Load original image
    original.addEventListener(
      "load",
      function() {
        wrap.classList.add("on");
      },
      false
    );
  });
</script>


</body>

</html>
