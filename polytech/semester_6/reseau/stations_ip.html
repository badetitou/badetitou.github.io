<!DOCTYPE html>
<html>
<head>
    <title>Stations IP4</title>
    <meta charset="UTF-8">

    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.indigo-pink.min.css">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
    <script defer src="https://code.getmdl.io/1.1.3/material.min.js"></script>
    <script src="https://storage.googleapis.com/code.getmdl.io/1.0.0/material.js"></script>


    <link href="reseau.css" rel="stylesheet" type="text/css">
    <link href="jquery-ui-1.11.4/jquery-ui.css" rel="stylesheet" type="text/css">

    <script src="jquery-2.2.2.min.js"></script>
    <script src="jquery-ui-1.11.4/jquery-ui.js"></script>
    <script src="reseau.js"></script>
    <script src="badetitou.js"></script>
</head>
<body onLoad="init(); main();">
<script>

    function init() {
        $("#formip4").load("formip4.html");
        $("#formether").load("formether.html");
        elements = [$('#station1'), $('#station2')];
        connexions = [
            {'objet1': $('#station1_interface1'), 'objet2': $('#station2_interface1')},
        ];
    };
</script>

<dialog class="mdl-dialog">
    <div class="mdl-dialog__title">
        Ajout Station
    </div>
    <div class="mdl-dialog__content">
        <p>
            Entrez l'ensemble des informations d'une station.
        </p>
        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
            <input class="mdl-textfield__input" type="text" id="ask_station_route_address_1">
            <label class="mdl-textfield__label" for="ask_station_route_address_1">Route Adresse </label>
        </div>
        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
            <input class="mdl-textfield__input" type="text" id="ask_station_route_masque_1">
            <label class="mdl-textfield__label" for="ask_station_route_masque_1">Route Masque</label>
        </div>
        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
            <input class="mdl-textfield__input" type="text" id="ask_station_route_passerelle_1">
            <label class="mdl-textfield__label" for="ask_station_route_passerelle_1">Route Passerelle</label>
        </div>
        <button class="mdl-button mdl-js-button mdl-button--primary add_route_position">
            Ajouter
        </button>

        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
            <input class="mdl-textfield__input" type="text" id="ask_station_portIp6">
            <label class="mdl-textfield__label" for="ask_station_portIp6">Adresse port Ip6</label>
        </div>

        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
            <input class="mdl-textfield__input" type="text" id="ask_station_portIp4">
            <label class="mdl-textfield__label" for="ask_station_portIp4">Adresse port Ip4</label>
        </div>
    </div>
    <div class="mdl-dialog__actions">
        <button type="button" class="mdl-button mdl-js-button mdl-button--primary valider">Valider</button>
        <button type="button" class="mdl-button mdl-js-button mdl-button--primary abandon">Abandon</button>
    </div>
</dialog>

<button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored show-modal" style="position: fixed;right: 12px;bottom: 12px;z-index: 3">
    <i class="material-icons">add</i>
</button>

<script>
    var dialog = document.querySelector('dialog');
    var showModalButton = document.querySelector('.show-modal');
    if (! dialog.showModal) {
        dialogPolyfill.registerDialog(dialog);
    }
    showModalButton.addEventListener('click', function() {
        nbPort = 1;
        dialog.showModal();
    });
    dialog.querySelector('.abandon').addEventListener('click', function() {
        dialog.close();
        remove_route_position();
        nbPort = 1;
    });
    dialog.querySelector('.add_route_position').addEventListener('click', function () {
        add_route_position();
    });
    dialog.querySelector('.valider').addEventListener('click', function () {
        dialog.close();
        var tabRouteAdresse = [];
        var tabRouteMasque = [];
        var tabRoutePasserelle = [];
        for (var i = 1; i <= nbPort;++i) {
            tabRouteAdresse.push($("#ask_station_route_address_"+i+"").val());
            tabRouteMasque.push($("#ask_station_route_masque_"+i+"").val());
            tabRoutePasserelle.push($("#ask_station_route_passerelle_"+i+"").val());
        }
        addStation(tabRouteAdresse, tabRouteMasque, tabRoutePasserelle, $("#ask_station_portIp4").val(), $("#ask_station_po").val())
        remove_route_position();
        nbPort = 1;
    })
</script>

<div class="station" id="station1" style="bottom: 250px; left: 230px;">
    <div class="nom">Station 1</div>
    <div class="cadre_titre" onClick="table_toggle($('#station1_table'));">Table de routage</div>
    <div class="tableroutage" id="station1_table">
        <div class="route">
            <div class="route_adresse">192.168.1.0</div>
            <div class="route_masque">255.255.255.0</div>
            <div class="route_passerelle">0.0.0.0</div>
        </div>
        <div class="route">
            <div class="route_adresse">0.0.0.0</div>
            <div class="route_masque">0.0.0.0</div>
            <div class="route_passerelle">192.168.1.1</div>
        </div>
    </div>
    <div class="cadre_titre" onClick="table_toggle($('#station1_arp'));">Cache ARP</div>
    <div class="cachearp" id="station1_arp"></div>
    <div class="cadre_titre" onClick="table_toggle($('#station1_paquets'));">Paquets reçus</div>
    <div class="paquets fantome" id="station1_paquets"></div>
    <div class="ports" id="station1_interfaces">
        <div class="port" id="station1_interface1">
            <div class="ethport" style="background-color: green;">00:11:11:11:11:01</div>
            <div class="ip4port" style="background-color: limegreen;">192.168.1.100</div>
        </div>
    </div>
</div>

<div class="station" id="station2" style="bottom: 0px; left: 400px;">
    <div class="nom">Station 2</div>
    <div class="cadre_titre" onClick="table_toggle($('#station2_table'));">Table de routage</div>
    <div class="tableroutage" id="station2_table">
        <div class="route">
            <div class="route_adresse">192.168.2.0</div>
            <div class="route_masque">255.255.255.0</div>
            <div class="route_passerelle">0.0.0.0</div>
        </div>
        <div class="route">
            <div class="route_adresse">0.0.0.0</div>
            <div class="route_masque">0.0.0.0</div>
            <div class="route_passerelle">192.168.2.1</div>
        </div>
    </div>
    <div class="cadre_titre" onClick="table_toggle($('#station2_arp'));">Cache ARP</div>
    <div class="cachearp" id="station2_arp"></div>
    <div class="cadre_titre" onClick="table_toggle($('#station2_paquets'));">Paquets reçus</div>
    <div class="paquets fantome" id="station2_paquets"></div>
    <div class="ports" id="station2_interfaces">
        <div class="port" id="station2_interface1">
            <div class="ethport" style="background-color: blue;">00:22:22:22:22:01</div>
            <div class="ip4port" style="background-color: steelblue;">192.168.2.100</div>
        </div>
    </div>
</div>

<!-- <div id="formip4"></div>
<div id="formether"></div> -->

</body>
</html>
