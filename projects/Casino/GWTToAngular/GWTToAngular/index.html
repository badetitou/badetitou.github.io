<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="description" content="Benoît Verhaeghe's blog">
    

    <link rel="icon" href="/img/logo/logo.png" type="image/x-icon">


    <title>Casino - GWT to Angular - Benoît Verhaeghe</title>

    <link rel="canonical" href="http://badetitou.github.io/projects/Casino/GWTToAngular/GWTToAngular/">

    <!-- <link rel="stylesheet" href="/assets/vendor/fontawesome-free/css/all.min.css"> -->
    
    <script src="https://kit.fontawesome.com/5574707d0b.js" crossorigin="anonymous"></script>
    
    <!-- My CSS -->
    <link rel="stylesheet" href="/assets/main.css">
    <!-- My JS -->
    <script src="/js/my-head.js"></script>

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <link type="application/atom+xml" rel="alternate" href="http://badetitou.github.io/feed.xml" title="Benoît Verhaeghe" />

</head>


<body>

    <nav>
    <div class="nav-wrapper">
        <a href="#" onclick="openNav()" class="sidenav-trigger"><i class="material-icons">menu</i></a>
        
        <ul class="left hide-on-med-and-down"> <li>
        <a href="/" style="margin-left: 20px;"> Benoît Verhaeghe</a></li></ul>

        <ul class="right hide-on-med-and-down">
            <li>
                <span style="width: 30px; display: inline-block;">
                    <i id="theme-switch" style="font-size: 20px" class="fa-solid fa-1x"></i>
                </span>
            </li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
            <li><a href="/teaching/">Teaching</a></li>
        
        
        
        
        
        
        
        
        
            <li><a href="/post/">Posts</a></li>
        
        
        
        
        
        
        
        
        
            <li><a href="/projects/">Projects</a></li>
        
        
        
            <li><a href="/research/">Research</a></li>
        
        
        
        
        
        </ul>
        
    </div>
</nav>

<ul class="sidenav" id="sidenav">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
    <li><a href="/">Home</a></li>
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
        
        
    
        
            <li><a href="/teaching/">Teaching</a></li>
        
    
        
        
    
        
        
    
        
            <li><a href="/post/">Posts</a></li>
        
    
        
        
    
        
        
    
        
            <li><a href="/projects/">Projects</a></li>
        
    
        
            <li><a href="/research/">Research</a></li>
        
    
        
        
    
</ul>

<div id="sidenav-overlay" onclick="closeNav()"></div>

    <!-- Project Header -->
<header class="intro-header"
    style="background-image: url('/img/home-bg.jpg')">
    <div class="container">
        <div class="row">
            <div class="post-heading text-center">
                <h1>Casino - GWT to Angular</h1>
                
                <span class="meta">Posted by Benoît "badetitou" Verhaeghe
                    on June 7, 2019</span>
                <span class="post-meta">
                    
                </span>
            </div>
        </div>
    </div>
</header>

<!-- Project Content -->
<article class="container">
    <div class="row">
        <div class="col s12 m12">
            <div class="card">
                <div class="card-content">
                    <h2 id="how-to-use-casino-for-the-gwt-to-angular-project">How to use Casino for the GWT to Angular project</h2>

<h3 id="summary">Summary</h3>

<ul>
  <li>Download Moose</li>
  <li>Download Casino</li>
  <li>Import GWT</li>
  <li>Export Angular</li>
</ul>

<h3 id="download-moose">Download Moose</h3>

<p>To download Moose, the first step is to download the last version of Pharo Launcher.
It is downloadable at <a href="https://pharo.org">https://pharo.org</a>.</p>

<p>Once the Pharo Launcher is downloaded, we have to create an image from the latest build of Moose 7.0.</p>

<p><img src="../img/mooseInstall.png" alt="Install Moose" class="center-image" /></p>

<p>Select the image, and press the green arrow to run Pharo.</p>

<h2 id="download-casino">Download Casino</h2>

<p>To use Casino for the migration, we must download two projects.</p>

<p>The importer (in this tutorial it’s the GWT importer)
The exporter (in this tutorial it’s the Angular exporter)
The importers and exporters are hosted on <a href="https://github.com/search?q=user:badetitou+Casino">Github</a>.</p>

<h3 id="iceberg">Iceberg</h3>

<p>To download project in Pharo, the easiest way is to use Iceberg. This project proposes us a User Interface to download projects and their dependencies.</p>

<p>To download the GWT importer:</p>

<ul>
  <li>Open Iceberg with Ctrl+O+I or on the menu with Tools&gt;Iceberg :</li>
  <li>Add a repository</li>
  <li>Enter the project localization</li>
  <li>Install the default baseline</li>
</ul>

<p>Now, the project Casino and the GWT importer should be loaded in the Image. You can save your image with <code class="language-plaintext highlighter-rouge">Ctrl+Shift+S</code>.</p>

<p>To access the code of the importer, we can use the Browser of Pharo. To do so, go on <code class="language-plaintext highlighter-rouge">Tools&gt;System Browser</code> or press <code class="language-plaintext highlighter-rouge">Ctrl+O+B</code>.</p>

<p>Then, browse the repositories to Casino-Model-CoreWeb-Importer</p>

<h2 id="import-gwt">Import GWT</h2>

<p>To migrate your application you have to migrate:</p>

<ul>
  <li>The User Interface</li>
  <li>The Behavioral Code</li>
  <li>The Business Code</li>
</ul>

<h3 id="user-interface">User Interface</h3>

<p>In Silverlight, the user interface is fully written in a xml file. To import a user interface into a Casino UI model, the importer visits its xml file. To do so, it parses the file with the XMLParser of Pharo, then it extends the XMLNodeVisitor. For each node, the visitor creates one or multiple entities in the UI model.</p>

<p>There are two major kinds of nodes:</p>

<p>Document which represents a Page in the UI model.
Element which represents a Widget in the UI model.
The element node may have attributes. Those attributes are transposed as Attribute or Action in the UI model by the silverlight importer.</p>

<p>To detect which widget corresponds to which node in the xml, the importer implements a factory. For each kind of xml tag, there is one corresponding entity in the UI meta-model. The binding between is done through the name of the xml tag for easy cases.</p>

<p>For example: a BLUIButton corresponds to a tag <button>.</button></p>

<p>We can find the same strategy for the binding of the attributes.</p>

<h3 id="behavioral-code">Behavioral Code</h3>

<p>WIP – The behavioral code is not currently handled.</p>

<h3 id="business-code">Business Code</h3>

<p>WIP – The business code is not currently handled.</p>

<h3 id="run">Run</h3>

<p>To run the import, you can execute these lines on a playground (<code class="language-plaintext highlighter-rouge">Ctrl+Shift+W</code>):</p>

<div class="language-smalltalk highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">SmalltalkImage</span> <span class="nf">current</span> <span class="nf">garbageCollect</span><span class="p">.</span>

<span class="c">"Generate BlApp"</span>
<span class="nv">gwtMooseModel</span> <span class="o">:=</span> <span class="nc">MooseModel</span> <span class="nf">importFromMSEStream:</span>  <span class="s">'D:\Developpement\mse\verveineJ5\KitchenGWT.mse'</span> <span class="nf">asFileReference</span> <span class="nf">readStream</span><span class="p">.</span>
<span class="nv">gwtMooseModel</span> <span class="nf">rootFolder:</span> <span class="s">'D:\Developpement\mse\verveineJ5'</span><span class="p">.</span>

<span class="c">"Generate Bl Model"</span>
<span class="nv">gwtModel</span> <span class="o">:=</span> <span class="nc">MooseModel</span> <span class="nb">new</span> <span class="nf">name:</span> <span class="s">'Showroom'</span><span class="p">;</span>
    <span class="nf">metamodel:</span>
        <span class="p">(</span><span class="nc">MooseModel</span>
            <span class="nf">metamodelComposedOf:</span>
                <span class="p">{</span><span class="nc">CSNLayoutMetamodelGenerator</span> <span class="nf">metamodel</span><span class="p">});</span> <span class="nf">yourself</span><span class="p">.</span>
<span class="nc">CSNMooseModelCreatorAngular</span> <span class="nf">runOn:</span> <span class="nv">gwtModel</span> <span class="nf">fromSourceModel:</span> <span class="nv">gwtMooseModel</span> <span class="nf">and:</span>  <span class="s">'D:\Developpement\mse\KitchenGWT\BLCoreIncubatorGwt\src\fr\bl\application.module.xml'</span><span class="p">.</span>

<span class="nc">CSNModelExporterAngularBLSpecific</span> <span class="nf">export:</span> <span class="nv">gwtModel</span><span class="p">.</span>
</code></pre></div></div>

                </div>
            </div>
        </div>
    </div>
</article>

    <!-- Footer -->
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col m12">
                <ul class="list-inline text-center">
                    
                    <li>
                        <a href="https://twitter.com/badetitou">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a rel="me" href="https://piaille.fr/@badetitou">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fab fa-mastodon fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="https://orcid.org/0000-0002-4588-2698">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fab fa-orcid fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://github.com/badetitou">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.linkedin.com/in/benoitverhaeghe">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fab fa-linkedin-in fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="mailto:benoit@badetitou.fr">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="text-center">Copyright &copy; badetitou 2023
                </p>
            </div>
        </div>
    </div>
</footer>

    <!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<script src="/js/my.js"></script>
<script src="/js/my-sidenav.js"></script>

<script src="/js/lightense.min.js"></script>

<script>

  // Init Lightense
  window.addEventListener("load", function() {
    Lightense("img:not(.no-lightense),.lightense", {
      background: 'rgba(0,0,0,0.05)'
    });
  }, false);

  // Example: Lazy Lightense
  document.addEventListener("DOMContentLoaded", function(e) {
    function createDom(type, cssClass) {
      var div = document.createElement(type);
      div.className = cssClass;
      return div;
    }

    var thumb = document.querySelector(".lightense-lazy");
    var original = new Image();

    // Init wrapper
    var wrap = createDom("div", "lightense-lazy-wrap");
    thumb.parentNode.insertBefore(wrap, thumb);
    wrap.appendChild(thumb);

    // Wrap thumbnail
    var thumbWrap = createDom("div", "lightense-lazy-thumb");
    thumbWrap.appendChild(thumb);
    wrap.appendChild(thumbWrap);

    // Wrap original
    var originalWrap = createDom("div", "lightense-lazy-large");
    original.src = thumb.dataset.original;
    originalWrap.appendChild(original);
    wrap.appendChild(originalWrap);

    // Load original image
    original.addEventListener(
      "load",
      function() {
        wrap.classList.add("on");
      },
      false
    );
  });
</script>


</body>

</html>
